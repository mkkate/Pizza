
CREATE SEQUENCE seq_id_pizza MINVALUE 1 START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_porudzbina MINVALUE 1 START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_strani_jezik MINVALUE 1 START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_osoba MINVALUE 1 START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_poklon MINVALUE 1 START WITH 1 INCREMENT BY 1 MAXVALUE 9999999999 ORDER  NOCYCLE;

--create sequence
CREATE SEQUENCE seq_id_vozilo
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_smena
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_surogat_govori
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_surogat_radi_u
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_surogat_sadrzi
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_surogat_br_telefona
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_surogat_email
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;

CREATE SEQUENCE seq_id_surogat_kategorija
MINVALUE 1
START WITH 1
INCREMENT BY 1
MAXVALUE 9999999999 ORDER  NOCYCLE;


CREATE TABLE VOZILO(
	Id_vozilo INT PRIMARY KEY,
	Naziv_tipa VARCHAR(30) NOT NULL,
	Proizvodjac VARCHAR(30) NOT NULL,
	Tip_vozila VARCHAR(30) CHECK (Tip_vozila IN ('BICIKL','SKUTER','AUTOMOBIL')),
	Velicina_rama FLOAT,
	Registarski_broj VARCHAR(7) UNIQUE,
	Br_saobracajne_dozvole INT UNIQUE
);

CREATE TABLE OSOBA (
	Id_osoba INT NOT NULL,
	Ime VARCHAR(30) NOT NULL,
	Prezime VARCHAR(30) NOT NULL,
	Ulica VARCHAR(30) NOT NULL,
	Broj INT NOT NULL,
	Grad VARCHAR(30) NOT NULL,
	Drzava VARCHAR(30) NOT NULL,
	FZaposleni CHAR(1) CHECK (FZaposleni IN ('T','F')),
	JMBG VARCHAR(13),
	Datum_rodjenja VARCHAR(15),
	FPrimalac_porudzbine CHAR(1) CHECK (FPrimalac_porudzbine IN ('T','F')),
	FDostavljac CHAR(1) CHECK (FDostavljac IN ('T','F')),
	FKupac CHAR(1) CHECK (FKupac IN ('T','F')),
	Datum_prve_porudzbine VARCHAR(15),
	FBonus_program CHAR(1) CHECK (FBonus_program IN ('T','F')),
	Br_bodova INT,
	Id_vozilo INT,
	CONSTRAINT fk_vozilo FOREIGN KEY (Id_vozilo) REFERENCES VOZILO(Id_vozilo),
	CONSTRAINT PK_OSOBA PRIMARY KEY (Id_osoba)
);

CREATE TABLE STRANI_JEZIK (
	Id_strani_jezik INT PRIMARY KEY,
	Naziv_jezika VARCHAR(20)
);

CREATE TABLE PIZZA (
	Id_pizza INT NOT NULL,
	Naziv VARCHAR(30) NOT NULL,
	Cena FLOAT,
	CONSTRAINT PK_PIZZA PRIMARY KEY (Id_pizza)
);

CREATE TABLE PORUDZBINA (
	Id_porudzbina INT NOT NULL,
	Cena INT,
	Nacin_placanja VARCHAR(20) CHECK (Nacin_placanja IN ('gotovina','kartica')),
	Status VARCHAR(20) CHECK (Status IN ('u pripremi', 'isporucena', 'vracena')),
	Vreme_isporuke VARCHAR(15),
	Datum_isporuke VARCHAR(15),
	Datum_kreiranja VARCHAR(15) NOT NULL,
	Vreme_kreiranja VARCHAR(15) NOT NULL,
	Id_osoba INT NOT NULL,
	Id_vozilo INT NOT NULL,
	CONSTRAINT fk_osoba_porudzbina FOREIGN KEY (Id_osoba) REFERENCES OSOBA(Id_osoba),
	CONSTRAINT fk_vozilo_porudzbina FOREIGN KEY (Id_vozilo) REFERENCES VOZILO(Id_vozilo),
	CONSTRAINT PK_PORUDZBINA PRIMARY KEY (Id_porudzbina)
);

CREATE TABLE DOBIJENI_POKLON (
	Id_dodele INT PRIMARY KEY,
	Tip_poklona VARCHAR(20) CHECK (Tip_poklona IN ('popust', 'poklon pizza')),
	Datum_iskoriscenja VARCHAR(15),
	Kvalifikacioni_bodovi INT NOT NULL,
	Datum_dodele VARCHAR(15) NOT NULL,
	Id_osoba INT NOT NULL,
	CONSTRAINT fk_osoba FOREIGN KEY (Id_osoba) REFERENCES OSOBA(Id_osoba)
);

CREATE TABLE SMENA(
	Id_smena INT PRIMARY KEY,
	Datum_od VARCHAR(15),
	Datum_do VARCHAR(15),
	Tip_smene CHAR(1) CHECK (Tip_smene IN ('1','2','3'))
);

CREATE TABLE GOVORI(
	Id_surogat_govori INT PRIMARY KEY,
	Id_strani_jezik INT NOT NULL,
	Id_osoba INT NOT NULL,
	Nivo CHAR(2) CHECK (Nivo IN ('A1','A2','B1','B2','C1','C2')),
	CONSTRAINT FK_GOVORI_JEZIK FOREIGN KEY (Id_strani_jezik) REFERENCES STRANI_JEZIK(Id_strani_jezik),
	CONSTRAINT FK_GOVORI_OSOBA FOREIGN KEY (Id_osoba) REFERENCES OSOBA(Id_osoba)
);

CREATE TABLE RADI_U(
	Id_surogat_radi_u INT PRIMARY KEY,
	Id_smena INT NOT NULL,
	Id_osoba INT NOT NULL,
	CONSTRAINT FK_RADI_U_SMENA FOREIGN KEY (Id_smena) REFERENCES SMENA(Id_smena),
	CONSTRAINT FK_RADI_U_OSOBA FOREIGN KEY (Id_osoba) REFERENCES OSOBA(Id_osoba)
);

CREATE TABLE SADRZI(
	Id_surogat_sadrzi INT PRIMARY KEY,
	Id_pizza INT NOT NULL,
	Id_porudzbina INT NOT NULL,
	Sastojci VARCHAR(255),
	Pojedinacna_cena FLOAT NOT NULL,
	CONSTRAINT FK_SADRZI_PIZZA FOREIGN KEY (Id_pizza) REFERENCES PIZZA(Id_pizza),
	CONSTRAINT FK_SADRZI_PORUDZBINA FOREIGN KEY (Id_porudzbina) REFERENCES PORUDZBINA(Id_porudzbina)
);

CREATE TABLE BR_TELEFONA(
	Id_surogat_br_telefona INT PRIMARY KEY,
	Broj_telefona VARCHAR(10) NOT NULL,
	Id_osoba INT NOT NULL,
	CONSTRAINT FK_BR_TELEFONA_OSOBE FOREIGN KEY (Id_osoba) REFERENCES OSOBA(Id_osoba)
);

CREATE TABLE EMAIL(
	Id_surogat_email INT PRIMARY KEY,
	Email VARCHAR(50) NOT NULL,
	Id_osoba INT NOT NULL,
	CONSTRAINT FK_MAIL_OSOBE FOREIGN KEY (Id_osoba) REFERENCES OSOBA(Id_osoba)
);

CREATE TABLE KATEGORIJA(
	Id_surogat_kategorija INT PRIMARY KEY,
	Kategorija_vozacke_dozvole CHAR(2) CHECK(Kategorija_vozacke_dozvole IN ('AM','A1','A2','A','B1','B','BE')),
	Id_osoba INT NOT NULL,
	CONSTRAINT FK_KATEGORIJA_OSOBE FOREIGN KEY (Id_osoba) REFERENCES OSOBA(Id_osoba)
);
